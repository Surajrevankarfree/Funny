<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Will You Be My Valentine? üíò</title>

<style>
  :root{
    /* Normal palette (darker, elegant, less bright) */
    --n1:#32111c;
    --n2:#6b2f45;

    /* Destiny palette */
    --d1:#0b1020;
    --d2:#1b1f3a;

    --shadow: 0 22px 60px rgba(0,0,0,.38);
    --glass1: rgba(255,255,255,.14);
    --glass2: rgba(255,255,255,.08);
    --stroke: rgba(255,255,255,.16);

    --btnGlass: rgba(255,255,255,.12);
    --btnStroke: rgba(255,255,255,.18);

    --textSoft: rgba(255,255,255,.90);
    --textSofter: rgba(255,255,255,.78);
  }

  *{ box-sizing:border-box; }

  body{
    margin:0;
    height:100vh;
    overflow:hidden;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    text-align:center;
    color:#fff;
    background:
      radial-gradient(circle at 25% 20%, rgba(176,106,126,.18) 0%, transparent 58%),
      radial-gradient(circle at 75% 70%, rgba(176,106,126,.12) 0%, transparent 62%),
      linear-gradient(135deg, var(--n1), var(--n2));
    transition: background .6s ease;
    position: relative;
  }

  body::before{
    content:"";
    position:fixed;
    inset:0;
    pointer-events:none;
    background:
      radial-gradient(circle at 50% 38%, rgba(0,0,0,0) 0%, rgba(0,0,0,.22) 55%, rgba(0,0,0,.55) 100%);
    z-index:0;
  }

  body.destiny{
    background:
      radial-gradient(circle at 20% 20%, rgba(255,255,255,.15), transparent 46%),
      radial-gradient(circle at 80% 30%, rgba(255,255,255,.08), transparent 44%),
      linear-gradient(135deg, var(--d1), var(--d2));
  }

  body.destiny::before{
    background:
      radial-gradient(circle at 50% 38%, rgba(0,0,0,0) 0%, rgba(0,0,0,.28) 55%, rgba(0,0,0,.62) 100%);
  }

  .wrap{
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding: 18px;
    position: relative;
    z-index: 1;
  }

  .card{
    width:min(940px, 95vw);
    padding: 30px 26px 26px;
    border-radius: 28px;
    background: linear-gradient(180deg, var(--glass1), var(--glass2));
    border: 1px solid var(--stroke);
    box-shadow: var(--shadow);
    backdrop-filter: blur(14px);
    position:relative;
    overflow:hidden;
  }

  /* subtle inner glow */
  .card::before{
    content:"";
    position:absolute;
    inset:-2px;
    pointer-events:none;
    background:
      radial-gradient(circle at 50% 10%, rgba(255,255,255,.12), transparent 45%),
      radial-gradient(circle at 10% 90%, rgba(255,255,255,.05), transparent 50%);
    opacity:.55;
    z-index:0;
  }

  .content{
    position:relative;
    z-index:1;
  }

  /* Top row with mode badge left, locked badge right */
  .topRow{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    margin-bottom: 12px;
    padding-left: 78px; /* leaves room for left-middle caricature if near edge */
  }

  .badge{
    display:inline-flex;
    gap:10px;
    align-items:center;
    padding:10px 14px;
    border-radius: 999px;
    background: rgba(255,255,255,.12);
    border: 1px solid rgba(255,255,255,.16);
    font-size: 14px;
    font-weight: 800;
    white-space:nowrap;
  }

  .lockedBadge{
    display:none;
    padding:10px 14px;
    border-radius:999px;
    background: rgba(255,255,255,.12);
    border: 1px solid rgba(255,255,255,.18);
    font-size: 14px;
    font-weight: 900;
    white-space:nowrap;
    align-items:center;
    gap:8px;
  }
  .lockedBadge.show{ display:inline-flex; }

  /* Caricature moved to left-middle so it never overlaps */
  .caricature{
    position:absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%) rotate(-2deg);
    width: 64px;
    height: 64px;
    border-radius: 18px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size: 34px;
    background: rgba(255,255,255,.12);
    border: 1px solid rgba(255,255,255,.18);
    box-shadow: 0 14px 30px rgba(0,0,0,.22);
    backdrop-filter: blur(10px);
    transition: transform .15s ease, filter .15s ease;
    user-select:none;
    z-index: 3;
  }
  .caricature.pop{
    transform: translateY(-50%) rotate(2deg) scale(1.08);
    filter: brightness(1.08);
  }

  h1{
    margin: 10px 0 6px;
    font-size: clamp(30px, 4.8vw, 48px);
    line-height:1.1;
    text-shadow: 0 16px 40px rgba(0,0,0,.45);
  }

  p{
    margin: 10px auto 18px;
    max-width: 62ch;
    font-size: clamp(15px, 2.2vw, 18px);
    color: var(--textSoft);
  }

  .subtle{
    color: var(--textSofter);
    margin-top: 6px;
  }

  button{
    border:none;
    padding: 14px 26px;
    font-size: 18px;
    border-radius: 999px;
    cursor:pointer;
    transition: transform .18s ease, opacity .18s ease, filter .18s ease;
    box-shadow: 0 12px 26px rgba(0,0,0,.24);
    user-select:none;
    transform-origin:center;
  }
  button:active{ transform: translateY(1px) scale(.99); }
  button:disabled{ cursor: default; opacity:.82; }

  .btnRow{
    display:flex;
    flex-wrap:wrap;
    gap:12px;
    justify-content:center;
    align-items:center;
    margin-top: 16px;
  }

  .primary{
    background: linear-gradient(135deg, #2ee59d, #00c853);
    color:#083b22;
    font-weight:900;
  }

  .ghost{
    background: rgba(255,255,255,.12);
    border: 1px solid rgba(255,255,255,.16);
    color:#fff;
    box-shadow:none;
    padding: 12px 16px;
    font-size: 15px;
    font-weight: 800;
  }

  /* Mode toggle pill */
  .modeToggle{
    display:inline-flex;
    align-items:center;
    gap:10px;
    padding: 10px 14px;
    border-radius: 999px;
    background: rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.14);
    font-size: 14px;
    font-weight:900;
  }

  .switch{
    width: 56px;
    height: 30px;
    background: rgba(0,0,0,.28);
    border: 1px solid rgba(255,255,255,.18);
    border-radius: 999px;
    position: relative;
    cursor:pointer;
    flex:none;
  }

  .knob{
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: rgba(255,255,255,.92);
    position:absolute;
    top: 2px;
    left: 2px;
    transition: left .18s ease;
  }
  body.destiny .knob{ left: 30px; }

  .section{
    margin-top: 10px;
    display:none;
  }
  .section.show{ display:block; }

  /* Yes/No area */
  .buttons{
    margin-top: 18px;
    display:flex;
    gap:16px;
    justify-content:center;
    align-items:center;
    position: relative; /* required for correct No positioning */
    min-height: 96px;
    padding: 6px 0;
  }

  #yesBtn{
    background: linear-gradient(135deg, #2ee59d, #00c853);
    color:#083b22;
    font-weight:900;
    position: relative;
    z-index: 2;
  }

  /* fade out the big Yes button after accept (looks cleaner than sticking) */
  #yesBtn.fadeOut{
    opacity: 0;
    transform: scale(.92);
    pointer-events:none;
  }

  #noBtn{
    background: rgba(255,255,255,.12);
    border: 1px solid rgba(255,255,255,.18);
    color:#fff;
    position:absolute;
    left: 60%;
    top: 10px;
    backdrop-filter: blur(8px);
    z-index: 2;
    box-shadow: 0 12px 26px rgba(0,0,0,.22);
  }

  .msg{
    margin-top: 18px;
    font-size: clamp(18px, 2.6vw, 26px);
    font-weight: 900;
    min-height: 34px;
    text-shadow: 0 16px 40px rgba(0,0,0,.45);
  }

  .qa{
    margin: 14px auto 0;
    max-width: 880px;
    display:none;
  }
  .qa.show{ display:block; }

  .q{
    font-size: clamp(16px, 2.4vw, 22px);
    font-weight: 900;
    margin: 10px 0 12px;
  }

  .ansRow{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    justify-content:center;
    margin-bottom: 10px;
  }

  .ansBtn{
    padding: 12px 16px;
    font-size: 15px;
    border-radius: 999px;
    background: rgba(255,255,255,.12);
    border: 1px solid rgba(255,255,255,.16);
    color:#fff;
    box-shadow:none;
    font-weight: 800;
  }
  .ansBtn:hover{ transform: translateY(-1px); }

  .reply{
    font-size: 14px;
    color: var(--textSoft);
    min-height: 18px;
  }

  .footerTip{
    margin-top: 12px;
    font-size: 13px;
    color: var(--textSofter);
  }

  /* Floating hearts */
  .heart{
    position:fixed;
    bottom:-60px;
    font-size: 18px;
    opacity:.60;
    pointer-events:none;
    animation: floatUp linear forwards;
    filter: drop-shadow(0 8px 18px rgba(0,0,0,.20));
    z-index: 0;
  }

  @keyframes floatUp{
    from{ transform: translateY(0) translateX(0) scale(.92); opacity:0; }
    10%{ opacity:.60; }
    to{ transform: translateY(-120vh) translateX(var(--drift)) scale(1.22); opacity:0; }
  }

  /* Small helpers */
  .spacer12{ height: 12px; }
  .hide{ display:none !important; }

  /* Mobile tweak: smaller left caricature */
  @media (max-width: 540px){
    .caricature{
      width: 54px; height: 54px;
      font-size: 30px;
      left: 12px;
    }
    .topRow{ padding-left: 66px; }
  }
</style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <div class="content">

        <div class="caricature" id="caricature">ü•∫</div>

        <div class="topRow">
          <div class="badge" id="modeBadge">üíå Normal Mode</div>
          <div class="lockedBadge" id="lockedBadge">üíç Locked in</div>
        </div>

        <!-- MODE SELECT SCREEN -->
        <div id="modeScreen" class="section show">
          <h1>Choose your vibe üíò</h1>
          <p class="subtle">
            Pick how dramatic this love story should be. Then hit <b>Start</b> and we begin üòå
          </p>

          <div class="btnRow">
            <div class="modeToggle">
              <span>üíå Normal</span>
              <div class="switch" id="modeSwitch" role="button" aria-label="Toggle Destiny Mode">
                <div class="knob"></div>
              </div>
              <span>‚ùÑÔ∏è Destiny</span>
            </div>

            <button class="primary" id="startExperience" type="button">Start üéµ</button>
          </div>

          <div class="footerTip">
            Normal plays <b>stay_with_me_intro.mp3</b> ‚Ä¢ Destiny plays <b>beutiful_life.mp3</b>
          </div>
        </div>

        <!-- MAIN SCREEN -->
        <div id="mainScreen" class="section">
          <h1>Will you be my Valentine? üíï</h1>
          <p class="subtle">Choose wisely‚Ä¶ the ‚ÄúNo‚Äù button is shy üòÖ</p>

          <div class="buttons" id="choiceArea">
            <button id="yesBtn" type="button">Yes üòç</button>
            <button id="noBtn" type="button">No üôà</button>
          </div>

          <div class="msg" id="message"></div>

          <div class="qa" id="qaBox">
            <div class="q" id="qText"></div>
            <div class="ansRow" id="ansRow"></div>
            <div class="reply" id="replyText"></div>

            <div class="spacer12"></div>

            <div class="btnRow">
              <button class="ghost" id="musicToggle" type="button">Play / Pause üéµ</button>
              <button class="ghost" id="restartMusic" type="button">Restart ‚ü≤</button>
              <button class="ghost" id="backToMode" type="button">Change Mode ‚Ü©</button>
            </div>
          </div>

          <div class="footerTip" id="tipLine">Tip: click ‚ÄúYes‚Äù to unlock the cute questions üòå</div>
        </div>

      </div>
    </div>
  </div>

  <!-- Audio (keep files in same folder as this HTML) -->
  <audio id="normalMusic" loop preload="auto">
    <source src="stay_with_me_intro.mp3" type="audio/mpeg">
  </audio>

  <audio id="destinyMusic" loop preload="auto">
    <source src="beutiful_life.mp3" type="audio/mpeg">
  </audio>

<script>
  // ============
  // Elements
  // ============
  const body = document.body;

  const modeScreen = document.getElementById("modeScreen");
  const mainScreen = document.getElementById("mainScreen");

  const modeBadge  = document.getElementById("modeBadge");
  const lockedBadge = document.getElementById("lockedBadge");

  const modeSwitch = document.getElementById("modeSwitch");
  const startExperience = document.getElementById("startExperience");
  const backToMode = document.getElementById("backToMode");

  const normalMusic = document.getElementById("normalMusic");
  const destinyMusic = document.getElementById("destinyMusic");

  const yesBtn = document.getElementById("yesBtn");
  const noBtn  = document.getElementById("noBtn");

  const message = document.getElementById("message");
  const qaBox = document.getElementById("qaBox");
  const qText = document.getElementById("qText");
  const ansRow = document.getElementById("ansRow");
  const replyText = document.getElementById("replyText");

  const musicToggle = document.getElementById("musicToggle");
  const restartMusic = document.getElementById("restartMusic");

  const caricature = document.getElementById("caricature");
  const choiceArea = document.getElementById("choiceArea");
  const tipLine = document.getElementById("tipLine");

  // ============
  // State
  // ============
  let destinyMode = false;
  let isAccepted = false;

  let noAttempts = 0;
  const MAX_ATTEMPTS = 5;

  // ============
  // Caricature faces
  // ============
  const cuteFaces    = ["ü•∫","üòä","üò≥","üôà","ü•∞","üòè","ü§≠","üíò","üòö","üòå","ü´∂","üßÅ","üçì"];
  const destinyFaces = ["‚ùÑÔ∏è","üò∂‚Äçüå´Ô∏è","üïØÔ∏è","üó°Ô∏è","üåô","üß£","üòÆ‚Äçüí®","ü•Ä","ü™Ω","‚ú®","üìú","‚òÇÔ∏è"];
  const nopeFaces    = ["üòè","üôÉ","üòà","ü§®","üòå","ü´£","üò§","üòµ‚Äçüí´"];

  function randomFace(arr){ return arr[Math.floor(Math.random() * arr.length)]; }

  function popCaricature(face){
    caricature.textContent = face;
    caricature.classList.add("pop");
    setTimeout(()=>caricature.classList.remove("pop"), 170);
  }

  // ============
  // Mode + Audio
  // ============
  function setMode(isDestiny){
    destinyMode = isDestiny;
    body.classList.toggle("destiny", destinyMode);
    modeBadge.textContent = destinyMode ? "‚ùÑÔ∏è Destiny Mode" : "üíå Normal Mode";
    popCaricature(destinyMode ? "‚ùÑÔ∏è" : "ü•∫");
  }

  function activeAudio(){ return destinyMode ? destinyMusic : normalMusic; }
  function inactiveAudio(){ return destinyMode ? normalMusic : destinyMusic; }

  async function playMusic(){
    const a = activeAudio();
    const b = inactiveAudio();
    try{
      b.pause();
      a.volume = 0.9;
      a.load();
      await a.play();
      return true;
    }catch(err){
      alert("Music couldn't play. Make sure both MP3 files are uploaded next to this HTML in GitHub Pages.");
      return false;
    }
  }

  function stopMusic(){
    normalMusic.pause();
    destinyMusic.pause();
  }

  // ============
  // Attempts: shrink No + grow Yes
  // ============
  function applyScales(){
    const noScale  = Math.max(0.40, 1 - noAttempts * 0.12);
    const yesScale = Math.min(1.70, 1 + noAttempts * 0.10);

    noBtn.style.transform = `scale(${noScale})`;

    if(!isAccepted){
      yesBtn.style.transform = `scale(${yesScale})`;
    }

    if(noAttempts >= MAX_ATTEMPTS){
      message.textContent = "‚ú® The universe has decided. ‚ú®";
      yesBtn.style.filter = "brightness(1.08)";
      popCaricature("‚ú®");
    }
  }

  function bumpAttempt(){
    if(isAccepted) return;
    noAttempts++;
    popCaricature(randomFace(nopeFaces));
    applyScales();
  }

  function resetAttempts(){
    noAttempts = 0;
    yesBtn.style.transform = "scale(1)";
    noBtn.style.transform  = "scale(1)";
    yesBtn.style.filter = "";
  }

  // ============
  // FIXED No movement: local coords inside choiceArea
  // ============
  function moveNo(){
    const pad = 6;

    const areaW = choiceArea.clientWidth;
    const areaH = choiceArea.clientHeight;

    const rectW = noBtn.offsetWidth;
    const rectH = noBtn.offsetHeight;

    const maxX = Math.max(pad, areaW - rectW - pad);
    const maxY = Math.max(pad, areaH - rectH - pad);

    const x = Math.random() * (maxX - pad) + pad;
    const y = Math.random() * (maxY - pad) + pad;

    noBtn.style.transition = "left .15s ease, top .15s ease";
    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";
  }

  function noEscape(e){
    if(e) e.preventDefault();
    bumpAttempt();
    moveNo();
  }

  // No button events
  noBtn.addEventListener("mouseover", noEscape);
  noBtn.addEventListener("mousedown", noEscape);
  noBtn.addEventListener("click", noEscape);
  noBtn.addEventListener("touchstart", noEscape, {passive:false});
  noBtn.addEventListener("focus", noEscape);

  // Keep No floating forever while on main screen (even after Yes)
  setInterval(()=>{
    if(mainScreen.classList.contains("show") && noBtn.style.display !== "none"){
      moveNo();
    }
  }, 1800);

  // ============
  // Questions decks (Normal + Destiny)
  // ============
  const cuteDeck = [
    {
      q:"Choose our first Valentine mission üíû",
      a:["Dinner date üçΩÔ∏è","Dessert date üç∞","Coffee + walk ‚òïüö∂"],
      r:["Elegant choice. I‚Äôll book the romance.","Sweet choice‚Ä¶ literally üòå","K-drama walking scene unlocked."]
    },
    {
      q:"How should I behave on the date?",
      a:["Gentleman mode üï¥Ô∏è","Flirty mode üòè","Both ‚úÖ"],
      r:["Classic and charming.","Bold. I like it.","Perfect. You understand the assignment üòåüíò"]
    },
    {
      q:"If I hold your hand, what happens?",
      a:["Smile üòä","Blush üôà","Pretend annoyed üò§‚ù§Ô∏è"],
      r:["Cute. I‚Äôm winning already.","Adorable. I‚Äôll be careful.","Noted. I‚Äôll act innocent üòå"]
    },
    {
      q:"Pick our vibe for the night üåô",
      a:["Cozy + calm üïØÔ∏è","Fun + chaotic üéâ","Romantic + slow üíû"],
      r:["Candlelight energy.","Chaos but cute.","Slow romance unlocked."]
    },
    {
      q:"Choose your Valentine title üëë",
      a:["My favourite person ü´∂","My date forever üíç","My cute mistake üòè"],
      r:["That‚Äôs dangerously sweet.","Okay that‚Äôs illegal levels of commitment.","Bold. I‚Äôll accept."]
    },
    {
      q:"Naughty but cute: what‚Äôs my punishment for being late? üòè",
      a:["A kiss fine üíã","Buy dessert üç∞","Hold hands extra long ü§ù"],
      r:["Fair and dangerous.","Sweet justice.","That‚Äôs basically a trap. I accept."]
    }
  ];

  const destinyDeck = [
    {
      q:"‚ùÑÔ∏è Destiny scene: snowfall or umbrella?",
      a:["Snowfall ‚ùÑÔ∏è","Umbrella ‚òÇÔ∏è","Both üé¨"],
      r:["The snow approves.","Classic K-drama move.","Main characters confirmed üòå"]
    },
    {
      q:"If I say ‚Äòstay‚Äô, you say‚Ä¶",
      a:["Okay‚Ä¶ just a little üòå","Only if you hold my hand ü§ç","Say it again ü´∂"],
      r:["My heart just did a little dance.","Deal. Hand locked.","Okay‚Ä¶ (says it again)"]
    },
    {
      q:"Pick our destiny symbol üß£",
      a:["Red scarf üß£","Moonlight üåô","Candle flame üïØÔ∏è"],
      r:["Iconic.","Cinematic.","A slow-burn classic."]
    },
    {
      q:"The plot twist is‚Ä¶",
      a:["We were always meant to meet ‚ú®","You‚Äôre my favourite chapter üìú","I‚Äôve been waiting üòÆ‚Äçüí®"],
      r:["Okay, fate is showing off.","That line would break the internet.","That‚Äôs a finale-level confession."]
    },
    {
      q:"Naughty destiny: your ‚Äòprice of fate‚Äô is‚Ä¶ üòè",
      a:["One forehead kiss üòå","A secret hug ü´£","Hold me close ‚ùÑÔ∏è"],
      r:["Soft romance unlocked.","Suspiciously adorable.","Main-characters only."]
    },
    {
      q:"Final destiny line:",
      a:["Yes, Valentine üíò","Yes‚Ä¶ but dramatic ‚ùÑÔ∏è","Yes‚Ä¶ I choose you üòå"],
      r:["Confirmed.","Under the streetlight, obviously.","That line just won the episode."]
    }
  ];

  let deckIndex = 0;
  function deck(){ return destinyMode ? destinyDeck : cuteDeck; }

  function renderQA(){
    const d = deck();

    if(deckIndex >= d.length){
      qText.textContent = destinyMode
        ? "‚ùÑÔ∏è Destiny complete. Valentine confirmed."
        : "üíñ Perfect. Valentine confirmed.";

      ansRow.innerHTML = "";
      replyText.textContent = "";
      popCaricature(destinyMode ? "‚ú®" : "üíò");
      return;
    }

    const item = d[deckIndex];
    qText.textContent = item.q;
    replyText.textContent = "";
    ansRow.innerHTML = "";

    item.a.forEach((label, i)=>{
      const b = document.createElement("button");
      b.className = "ansBtn";
      b.type = "button";
      b.textContent = label;

      b.addEventListener("click", ()=>{
        replyText.textContent = item.r[i] || "";
        popCaricature(randomFace(destinyMode ? destinyFaces : cuteFaces));
        setTimeout(()=>{
          deckIndex++;
          renderQA();
        }, 850);
      });

      ansRow.appendChild(b);
    });
  }

  // ============
  // UI reset
  // ============
  function resetUI(){
    isAccepted = false;
    resetAttempts();

    message.textContent = "";
    replyText.textContent = "";

    qaBox.classList.remove("show");
    ansRow.innerHTML = "";
    qText.textContent = "";

    yesBtn.disabled = false;
    yesBtn.classList.remove("fadeOut");
    yesBtn.textContent = "Yes üòç";
    yesBtn.style.transform = "scale(1)";
    yesBtn.style.filter = "";

    lockedBadge.classList.remove("show");
    tipLine.classList.remove("hide");

    noBtn.style.display = "";
    noBtn.style.left = "60%";
    noBtn.style.top  = "10px";
    noBtn.style.transform = "scale(1)";

    deckIndex = 0;
  }

  // ============
  // Handlers
  // ============
  modeSwitch.addEventListener("click", ()=> setMode(!destinyMode));

  startExperience.addEventListener("click", async ()=>{
    modeScreen.classList.remove("show");
    mainScreen.classList.add("show");
    resetUI();

    popCaricature(destinyMode ? "üåô" : "üòä");
    await playMusic();

    setTimeout(moveNo, 120);
  });

  backToMode.addEventListener("click", ()=>{
    stopMusic();
    mainScreen.classList.remove("show");
    modeScreen.classList.add("show");
    resetUI();
    popCaricature(destinyMode ? "‚ùÑÔ∏è" : "ü•∫");
  });

  yesBtn.addEventListener("click", ()=>{
    if(isAccepted) return;
    isAccepted = true;

    message.textContent = destinyMode
      ? "‚ùÑÔ∏è Destiny confirmed. You‚Äôre my Valentine."
      : "I knew it üòç Best decision ever!";

    popCaricature(destinyMode ? "üïØÔ∏è" : "ü•∞");

    tipLine.classList.add("hide");

    // fade out big Yes so it doesn't look stuck
    yesBtn.classList.add("fadeOut");
    setTimeout(()=>{ yesBtn.disabled = true; }, 180);

    lockedBadge.classList.add("show");

    qaBox.classList.add("show");
    deckIndex = 0;
    renderQA();
  });

  musicToggle.addEventListener("click", async ()=>{
    const a = activeAudio();
    if(a.paused) await playMusic();
    else a.pause();
    popCaricature(destinyMode ? "üåô" : "üòå");
  });

  restartMusic.addEventListener("click", async ()=>{
    const a = activeAudio();
    a.currentTime = 0;
    await playMusic();
    popCaricature(destinyMode ? "‚ú®" : "üíò");
  });

  // ============
  // Floating hearts
  // ============
  const heartEmojis = ["üíó","üíñ","üíï","üíò","üíù","üå∏","ü´∂"];
  setInterval(()=>{
    const h = document.createElement("div");
    h.className = "heart";
    h.textContent = heartEmojis[Math.floor(Math.random()*heartEmojis.length)];
    h.style.left = Math.random()*100 + "vw";
    h.style.setProperty("--drift", (Math.random()*120 - 60) + "px");
    h.style.fontSize = (Math.random()*12 + 12) + "px";
    h.style.animationDuration = (Math.random()*4.0 + 6.0) + "s";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(), 11000);
  }, 750);

  // init
  setMode(false);
</script>
</body>
</html>
