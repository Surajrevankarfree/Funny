<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Will You Be My Valentine? üíò</title>

<style>
  :root{
    --pink1:#ff7eb3; --pink2:#ff758c;
    --glass1: rgba(255,255,255,.18);
    --glass2: rgba(255,255,255,.28);
    --shadow: 0 18px 50px rgba(0,0,0,.25);
  }
  *{ box-sizing:border-box; }
  body{
    margin:0; height:100vh; overflow:hidden;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    text-align:center; color:#fff;
    background:
      radial-gradient(circle at 20% 20%, #ffd1e6 0%, transparent 45%),
      radial-gradient(circle at 80% 30%, #ffe5f1 0%, transparent 40%),
      linear-gradient(135deg, var(--pink2), var(--pink1));
  }
  .card{
    width:min(820px, 92vw);
    margin: 86px auto 0;
    padding: 34px 26px 28px;
    border-radius: 28px;
    background: linear-gradient(180deg, var(--glass2), var(--glass1));
    border: 1px solid rgba(255,255,255,.22);
    box-shadow: var(--shadow);
    backdrop-filter: blur(10px);
    position:relative;
    z-index:5;
  }
  .badge{
    display:inline-flex; gap:10px; align-items:center;
    padding:10px 14px; border-radius: 999px;
    background: rgba(255,255,255,.16);
    border: 1px solid rgba(255,255,255,.22);
    font-size: 14px; margin-bottom: 12px;
  }
  h1{ margin: 10px 0 6px; font-size: clamp(30px, 4.8vw, 44px); line-height:1.1; }
  p{ margin: 10px auto 18px; max-width: 56ch; font-size: clamp(15px, 2.2vw, 18px); opacity:.95; }

  .buttons{
    margin-top: 18px; display:flex; gap:16px;
    justify-content:center; align-items:center;
    position: relative; min-height: 72px;
  }
  button{
    border:none; padding: 14px 26px; font-size: 18px;
    border-radius: 999px; cursor:pointer;
    transition: transform .12s ease, opacity .12s ease;
    box-shadow: 0 12px 26px rgba(0,0,0,.18);
    user-select:none;
  }
  button:active{ transform: translateY(1px) scale(.99); }

  #yesBtn{
    background: linear-gradient(135deg, #2ee59d, #00c853);
    color:#083b22; font-weight:800;
  }
  #noBtn{
    background: rgba(255,255,255,.22);
    border: 1px solid rgba(255,255,255,.25);
    color:#fff; position:absolute;
    left: 55%; top: 8px;
    backdrop-filter: blur(8px);
  }

  .msg{ margin-top: 18px; font-size: clamp(18px, 2.6vw, 26px); font-weight:800; min-height: 34px; }

  .qa{ margin: 14px auto 0; max-width: 760px; display:none; }
  .qa.show{ display:block; }
  .q{ font-size: clamp(16px, 2.4vw, 22px); font-weight:700; margin: 10px 0 12px; }
  .ansRow{ display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin-bottom: 10px; }
  .ansBtn{
    padding: 12px 16px; font-size: 15px; border-radius: 999px;
    background: rgba(255,255,255,.18);
    border: 1px solid rgba(255,255,255,.22);
    color:#fff; box-shadow:none;
  }
  .ansBtn:hover{ transform: translateY(-1px); }
  .reply{ font-size: 14px; opacity:.95; min-height: 18px; }

  .footerTip{ margin-top: 12px; font-size: 13px; opacity:.92; }
  kbd{
    padding:2px 8px; border-radius: 999px;
    background: rgba(255,255,255,.16);
    border: 1px solid rgba(255,255,255,.22);
    font-size: 12px;
  }

  /* overlay */
  .overlay{
    position:fixed; inset:0; display:flex;
    align-items:center; justify-content:center;
    background: rgba(0,0,0,.26);
    backdrop-filter: blur(6px);
    z-index:50;
  }
  .overlayCard{
    width:min(520px, 92vw);
    background: rgba(255,255,255,.16);
    border:1px solid rgba(255,255,255,.22);
    border-radius: 24px;
    padding: 22px 18px;
    box-shadow: var(--shadow);
  }
  .overlayTitle{ font-size: 20px; font-weight: 800; margin-bottom: 10px; }
  .overlaySub{ font-size: 14px; opacity:.95; margin-bottom: 14px; }
  .overlayBtn{
    background: rgba(255,255,255,.18);
    border:1px solid rgba(255,255,255,.24);
    color:#fff; font-weight: 800;
    padding: 12px 18px; box-shadow:none;
  }
  .smallWarn{ margin-top: 10px; font-size: 13px; opacity:.95; }

  /* Goblin K-drama mode */
  body.goblin{
    background:
      radial-gradient(circle at 20% 20%, rgba(255,255,255,.22), transparent 45%),
      radial-gradient(circle at 70% 30%, rgba(255,255,255,.16), transparent 40%),
      linear-gradient(135deg, #0b1020, #1b1f3a);
  }
</style>
</head>

<body>

  <div class="overlay" id="startOverlay">
    <div class="overlayCard">
      <div class="overlayTitle">Start the vibe üéµ</div>
      <div class="overlaySub">Tap once to enable music (browser rule). Then Goblin mode can switch tracks too.</div>
      <button class="overlayBtn" id="startBtn" type="button">‚ñ∂ Start</button>
      <div class="smallWarn" id="startWarn"></div>
      <div class="footerTip" style="margin-top:12px;">Press <kbd>G</kbd> to toggle Goblin K-drama mode ‚ùÑÔ∏è</div>
    </div>
  </div>

  <div class="card">
    <div class="badge" id="modeBadge">üíå Cute Romantic Mode</div>
    <h1>Will you be my Valentine? üíï</h1>
    <p>Choose wisely‚Ä¶ the ‚ÄúNo‚Äù button is shy üòÖ</p>

    <div class="buttons">
      <button id="yesBtn" type="button">Yes üòç</button>
      <button id="noBtn" type="button">No üôà</button>
    </div>

    <div class="msg" id="message"></div>

    <div class="qa" id="qaBox">
      <div class="q" id="qText"></div>
      <div class="ansRow" id="ansRow"></div>
      <div class="reply" id="replyText"></div>

      <div class="footerTip">
        Music:
        <button class="ansBtn" id="musicToggle" type="button">Play / Pause üéµ</button>
        <button class="ansBtn" id="restartMusic" type="button">Restart ‚ü≤</button>
      </div>
    </div>

    <div class="footerTip">Press <kbd>G</kbd> anytime to toggle Goblin K-drama mode ‚ùÑÔ∏è</div>
  </div>

  <!-- ‚úÖ Normal Mode Music -->
  <audio id="romanticMusic" loop preload="auto">
    <source src="stay_with_me_intro.mp3" type="audio/mpeg">
  </audio>

  <!-- ‚úÖ Goblin Mode Music -->
  <audio id="goblinMusic" loop preload="auto">
    <source src="beutiful_life.mp3" type="audio/mpeg">
  </audio>

<script>
  const startOverlay = document.getElementById("startOverlay");
  const startBtn = document.getElementById("startBtn");
  const startWarn = document.getElementById("startWarn");

  const modeBadge = document.getElementById("modeBadge");
  const romanticMusic = document.getElementById("romanticMusic");
  const goblinMusic = document.getElementById("goblinMusic");

  const noBtn = document.getElementById("noBtn");
  const yesBtn = document.getElementById("yesBtn");
  const message = document.getElementById("message");

  const qaBox = document.getElementById("qaBox");
  const qText = document.getElementById("qText");
  const ansRow = document.getElementById("ansRow");
  const replyText = document.getElementById("replyText");

  const musicToggle = document.getElementById("musicToggle");
  const restartMusic = document.getElementById("restartMusic");

  let goblinMode = false;
  let musicReady = false;

  function activeAudio(){ return goblinMode ? goblinMusic : romanticMusic; }
  function inactiveAudio(){ return goblinMode ? romanticMusic : goblinMusic; }

  async function forcePlay(){
    const a = activeAudio();
    const b = inactiveAudio();
    try{
      b.pause();
      a.volume = 0.9;
      a.load();
      await a.play();
      musicReady = true;
      startWarn.textContent = "";
      return true;
    }catch(err){
      musicReady = false;
      startWarn.textContent =
        "Music blocked or file not found. Upload both: stay_with_me_intro.mp3 and beutiful_life.mp3 in same folder as Val.html";
      return false;
    }
  }

  startBtn.addEventListener("click", async ()=>{
    startOverlay.style.display = "none";
    await forcePlay();
  });

  musicToggle.addEventListener("click", async ()=>{
    const a = activeAudio();
    if(a.paused) await forcePlay();
    else a.pause();
  });

  restartMusic.addEventListener("click", async ()=>{
    const a = activeAudio();
    a.currentTime = 0;
    await forcePlay();
  });

  // Runaway NO
  function moveNo(){
    const padding = 18;
    const rect = noBtn.getBoundingClientRect();
    const maxX = window.innerWidth - rect.width - padding;
    const maxY = window.innerHeight - rect.height - padding;
    const x = Math.random() * (maxX - padding) + padding;
    const y = Math.random() * (maxY - padding) + padding;
    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";
  }
  noBtn.addEventListener("mouseover", moveNo);
  noBtn.addEventListener("touchstart", (e)=>{ e.preventDefault(); moveNo(); }, {passive:false});

  // Q&A decks
  const cuteDeck = [
    { q:"Choose our first Valentine mission üíû",
      a:["Dinner date üçΩÔ∏è","Dessert date üç∞","Coffee + walk ‚òïüö∂"],
      r:["Elegant choice. I‚Äôll book the romance.","Sweet choice‚Ä¶ literally üòå","K-drama walking scene unlocked."]},
    { q:"How should I behave on the date?",
      a:["Gentleman mode üï¥Ô∏è","Flirty mode üòè","Both ‚úÖ"],
      r:["Classic and charming.","Bold. I like it.","Perfect. You understand the assignment üòåüíò"]},
    { q:"If I hold your hand, what happens?",
      a:["Smile üòä","Blush üôà","Pretend annoyed üò§‚ù§Ô∏è"],
      r:["Cute. I‚Äôm winning already.","Adorable. I‚Äôll be careful.","Noted. I‚Äôll act innocent üòå"]},
  ];

  const goblinDeck = [
    { q:"‚ùÑÔ∏è Destiny scene: snowfall or umbrella?",
      a:["Snowfall ‚ùÑÔ∏è","Umbrella ‚òÇÔ∏è","Both üé¨"],
      r:["The snow approves.","Classic K-drama move.","Main characters confirmed üòå"]},
    { q:"If I say ‚Äòstay‚Äô, you say‚Ä¶",
      a:["Okay‚Ä¶ just a little üòå","Only if you hold my hand ü§ç","Say it again ü´∂"],
      r:["My heart just did a little dance.","Deal. Hand locked.","Okay‚Ä¶ (says it again)"]},
  ];

  let deckIndex = 0;
  function deck(){ return goblinMode ? goblinDeck : cuteDeck; }

  function renderQA(){
    const d = deck();
    if(deckIndex >= d.length){
      qText.textContent = goblinMode ? "‚ùÑÔ∏è Destiny complete. Valentine confirmed." : "üíñ Perfect. Valentine confirmed.";
      ansRow.innerHTML = "";
      replyText.textContent = "Now send the link and pretend this was effortless üòå";
      return;
    }
    const item = d[deckIndex];
    qText.textContent = item.q;
    replyText.textContent = "";
    ansRow.innerHTML = "";

    item.a.forEach((label, i)=>{
      const b = document.createElement("button");
      b.className = "ansBtn";
      b.type = "button";
      b.textContent = label;
      b.addEventListener("click", ()=>{
        replyText.textContent = item.r[i] || "Noted üòå";
        setTimeout(()=>{ deckIndex++; renderQA(); }, 850);
      });
      ansRow.appendChild(b);
    });
  }

  yesBtn.addEventListener("click", ()=>{
    message.textContent = goblinMode ? "‚ùÑÔ∏è Destiny confirmed. You‚Äôre my Valentine." : "I knew it üòç Best decision ever!";
    noBtn.style.display="none";
    qaBox.classList.add("show");
    deckIndex = 0;
    renderQA();
  });

  function toggleGoblin(){
    goblinMode = !goblinMode;
    document.body.classList.toggle("goblin", goblinMode);
    modeBadge.textContent = goblinMode ? "‚ùÑÔ∏è Goblin K-drama Destiny Mode" : "üíå Cute Romantic Mode";

    if(qaBox.classList.contains("show")){
      deckIndex = 0;
      renderQA();
    }

    // Switch track instantly if music already started
    if(musicReady){
      forcePlay();
    }
  }

  document.addEventListener("keydown",(e)=>{
    if(e.key.toLowerCase()==="g") toggleGoblin();
  });
</script>

</body>
</html>
